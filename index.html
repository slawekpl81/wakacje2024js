<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="travel-luggage.png" />
    <title>WAKACJE2024</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <style>
      body {
        background-color: lightgreen;
      }
      .header p {
        font-family: Arial, Helvetica, sans-serif;
      }
      .header {
        overflow: hidden;
        background-color: greenyellow;
        padding: 20px 10px;
      }

      /* Style the header links */
      .header p {
        float: left;
        color: black;
        text-align: center;
        padding: 12px;
        text-decoration: none;
        font-size: 36px;
        line-height: 25px;
        border-radius: 4px;
      }
      #map {
        height: 80vh;
      }

      /* CSS */
      .button-5 {
        align-items: center;
        background-clip: padding-box;
        background-color: #fa6400;
        border: 1px solid transparent;
        border-radius: 0.25rem;
        box-shadow: rgba(0, 0, 0, 0.02) 0 1px 3px 0;
        box-sizing: border-box;
        color: #fff;
        cursor: pointer;
        display: inline-flex;
        font-family: system-ui, -apple-system, system-ui, "Helvetica Neue",
          Helvetica, Arial, sans-serif;
        font-size: 16px;
        font-weight: 600;
        justify-content: center;
        line-height: 1.25;
        margin: 0;
        min-height: 3rem;
        padding: calc(0.875rem - 1px) calc(1.5rem - 1px);
        position: relative;
        text-decoration: none;
        transition: all 250ms;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        vertical-align: baseline;
        width: auto;
      }

      .button-5:hover,
      .button-5:focus {
        background-color: #fb8332;
        box-shadow: rgba(0, 0, 0, 0.1) 0 4px 12px;
      }

      .button-5:hover {
        transform: translateY(-1px);
      }

      .button-5:active {
        background-color: #c85000;
        box-shadow: rgba(0, 0, 0, 0.06) 0 2px 4px;
        transform: translateY(0);
      }
    </style>
  </head>
  <body>
    <div class="header">
      <p>Wakacje 2024 - Kazimierz Dolny</p>
      <p>Plan wycieczki</p>
    </div>

    <div>
      <button id="link_to_web" class="button-5">...wybierz znacznik</button>
    </div>
    <div id="map"></div>
    <div class="data-list">
      <ol></ol>
    </div>

    <script src="data.js"></script>
    <script src="to_sandomierz.js"></script>
    <script src="to_lublin.js"></script>
    <script src="to_zamek.js"></script>
    <script>
      let castle_icon = L.icon({
        iconUrl: "castle.png",
        iconSize: [38, 95],
      });
      let sleep_icon = L.icon({
        iconUrl: "sleeping.png",
        iconSize: [38, 95],
      });
      let here_icon = L.icon({
        iconUrl: "placeholder.png",
        iconSize: [38, 38],
      });

      let map = L.map("map").setView(
        [51.31526320761561, 21.953262725983183],
        13
      );
      L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 19,
        attribution:
          '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
      }).addTo(map);

      L.geoJSON(to_sand).addTo(map);
      L.geoJSON(to_lu).addTo(map);
      L.geoJSON(to_uj).addTo(map);

      // Check if geolocation is supported by the browser
      if ("geolocation" in navigator) {
        // Prompt user for permission to access their location
        navigator.geolocation.getCurrentPosition(
          // Success callback function
          (position) => {
            // Get the user's latitude and longitude coordinates
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            L.marker([lat, lng], { icon: here_icon })
              .bindPopup("TU JESTEM!")
              .openPopup()
              .addTo(map);

            // Do something with the location data, e.g. display on a map
            console.log(`Latitude: ${lat}, longitude: ${lng}`);
          },
          // Error callback function
          (error) => {
            // Handle errors, e.g. user denied location sharing permissions
            console.error("Error getting user location:", error);
          }
        );
      } else {
        // Geolocation is not supported by the browser
        console.error("Geolocation is not supported by this browser.");
      }
      let a_to_travel = document.querySelector("#link_to_web");
      for (let localization of localizations) {
        L.marker(localization.coord)
          .bindPopup(localization.popup_text)
          .openPopup()
          .on("click", () => {
            a_to_travel.innerText = localization.popup_text;
            a_to_travel.addEventListener("click", () => {
              window.open(localization.link, "_blank").focus();
            });
          })
          .addTo(map);
      }
    </script>
  </body>
</html>
